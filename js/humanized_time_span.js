function humanized_time_span(l,r,t,p){t=t||{past:[{ceiling:60,text:"$seconds seconds ago"},{ceiling:3600,text:"$minutes minutes ago"},{ceiling:86400,text:"$hours hours ago"},{ceiling:2629744,text:"$days days ago"},{ceiling:31556926,text:"$months months ago"},{ceiling:null,text:"$years years ago"}],future:[{ceiling:60,text:"in $seconds seconds"},{ceiling:3600,text:"in $minutes minutes"},{ceiling:86400,text:"in $hours hours"},{ceiling:2629744,text:"in $days days"},{ceiling:31556926,text:"in $months months"},{ceiling:null,text:"in $years years"}]};p=p||[[31556926,"years"],[2629744,"months"],[86400,"days"],[3600,"hours"],[60,"minutes"],[1,"seconds"]];l=new Date(l);r=r?new Date(r):new Date();var q=(r-l)/1000;var o="past";if(q<0){o="future";q=0-q}function s(){for(var a=0;a<t[o].length;a++){if(t[o][a].ceiling==null||q<=t[o][a].ceiling){return t[o][a]}}return null}function k(){var c=q;var d={};for(var b=0;b<p.length;b++){var a=Math.floor(c/p[b][0]);c=c-(p[b][0]*a);d[p[b][1]]=a}return d}function n(a){var b=k();var c=a.text.replace(/\$(\w+)/g,function(){return b[arguments[1]]});return m(c,b)}function m(c,d){for(var b in d){if(d[b]==1){var a=new RegExp("\\b"+b+"\\b");c=c.replace(a,function(){return arguments[0].replace(/s\b/g,"")})}}return c}return n(s())};