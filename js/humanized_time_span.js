function humanized_time_span(t,p,r,n){r=r||{past:[{ceiling:60,text:"$seconds seconds ago"},{ceiling:3600,text:"$minutes minutes ago"},{ceiling:86400,text:"$hours hours ago"},{ceiling:2629744,text:"$days days ago"},{ceiling:31556926,text:"$months months ago"},{ceiling:null,text:"$years years ago"}],future:[{ceiling:60,text:"in $seconds seconds"},{ceiling:3600,text:"in $minutes minutes"},{ceiling:86400,text:"in $hours hours"},{ceiling:2629744,text:"in $days days"},{ceiling:31556926,text:"in $months months"},{ceiling:null,text:"in $years years"}]};n=n||[[31556926,"years"],[2629744,"months"],[86400,"days"],[3600,"hours"],[60,"minutes"],[1,"seconds"]];t=new Date(t);p=p?new Date(p):new Date();var o=(p-t)/1000;var m="past";if(o<0){m="future";o=0-o}function q(){for(var a=0;a<r[m].length;a++){if(r[m][a].ceiling==null||o<=r[m][a].ceiling){return r[m][a]}}return null}function s(){var b=o;var c={};for(var a=0;a<n.length;a++){var d=Math.floor(b/n[a][0]);b=b-(n[a][0]*d);c[n[a][1]]=d}return c}function l(c){var a=s();var b=c.text.replace(/\$(\w+)/g,function(){return a[arguments[1]]});return k(b,a)}function k(b,c){for(var a in c){if(c[a]==1){var d=new RegExp("\\b"+a+"\\b");b=b.replace(d,function(){return arguments[0].replace(/s\b/g,"")})}}return b}return l(q())};