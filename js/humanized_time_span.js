function humanized_time_span(p,l,n,t){n=n||{past:[{ceiling:60,text:"$seconds seconds ago"},{ceiling:3600,text:"$minutes minutes ago"},{ceiling:86400,text:"$hours hours ago"},{ceiling:2629744,text:"$days days ago"},{ceiling:31556926,text:"$months months ago"},{ceiling:null,text:"$years years ago"}],future:[{ceiling:60,text:"in $seconds seconds"},{ceiling:3600,text:"in $minutes minutes"},{ceiling:86400,text:"in $hours hours"},{ceiling:2629744,text:"in $days days"},{ceiling:31556926,text:"in $months months"},{ceiling:null,text:"in $years years"}]};t=t||[[31556926,"years"],[2629744,"months"],[86400,"days"],[3600,"hours"],[60,"minutes"],[1,"seconds"]];p=new Date(p);l=l?new Date(l):new Date();var k=(l-p)/1000;var s="past";if(k<0){s="future";k=0-k}function m(){for(var a=0;a<n[s].length;a++){if(n[s][a].ceiling==null||k<=n[s][a].ceiling){return n[s][a]}}return null}function o(){var d=k;var a={};for(var c=0;c<t.length;c++){var b=Math.floor(d/t[c][0]);d=d-(t[c][0]*b);a[t[c][1]]=b}return a}function r(a){var b=o();var c=a.text.replace(/\$(\w+)/g,function(){return b[arguments[1]]});return q(c,b)}function q(d,a){for(var c in a){if(a[c]==1){var b=new RegExp("\\b"+c+"\\b");d=d.replace(b,function(){return arguments[0].replace(/s\b/g,"")})}}return d}return r(m())};